<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>trabajo1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="Trabajo1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Trabajo1_files/libs/quarto-html/quarto.js"></script>
<script src="Trabajo1_files/libs/quarto-html/popper.min.js"></script>
<script src="Trabajo1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Trabajo1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Trabajo1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Trabajo1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Trabajo1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Trabajo1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Trabajo1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Trabajo1.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">




<section id="introducción" class="level1">
<h1>Introducción:</h1>
<p>En la etapa de preprocesamiento se tiene como objetivo abordar técnicas que permitan obtener información organizada, evitar información que pueda ser redundante, identificar posibles problemas presentes en las bases de datos y hacer el respectivo tratamiento. Específicamente, en este trabajo se desarrollarán metodologías para el tratamiento de datos atípicos y datos faltantes.</p>
<div id="6b251200" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerias a usar </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> missingno <span class="im">as</span> msno</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> SimpleImputer</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> KNNImputer</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pyod.models.mad <span class="im">import</span> MAD</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="cargando-la-base-de-datos" class="level4">
<h4 class="anchored" data-anchor-id="cargando-la-base-de-datos">Cargando la base de datos</h4>
<div id="bf8bd686" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lectura del archivo y cargando los datos en un DataFrame</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>ruidoso <span class="op">=</span> pd.read_csv(<span class="st">"ruidoso.txt"</span>, sep<span class="op">=</span><span class="st">","</span>, index_col <span class="op">=</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dimensiones-de-los-datos" class="level4">
<h4 class="anchored" data-anchor-id="dimensiones-de-los-datos">Dimensiones de los datos</h4>
<div id="79f4c8dc" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirando las dimensiones</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ruidoso.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>(66, 4)</code></pre>
</div>
</div>
</section>
<section id="encabezado-y-cola-de-los-datos" class="level4">
<h4 class="anchored" data-anchor-id="encabezado-y-cola-de-los-datos">Encabezado y cola de los datos</h4>
<div id="21b9cd4c" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encabezado y cola de los datos</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ruidoso.head())</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ruidoso.tail())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
1     166400      79200           1100            0.0
2      20000      11000              0            0.0
3      37800      18000              0            0.0
4      24500      16700              0          100.0
5     103100      33500           1900          200.0

    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
62      20700      16200              0            0.0
63      15100       9900              0            0.0
64      24500      12400            300          300.0
65      12800       8500              0            0.0
66    3108200    1469100          25800            NaN</code></pre>
</div>
</div>
</section>
<section id="mirando-las-caracteristicas-de-los-datos" class="level4">
<h4 class="anchored" data-anchor-id="mirando-las-caracteristicas-de-los-datos">Mirando las caracteristicas de los datos</h4>
<div id="6c1669ff" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirando las caracteristicas de los datos</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ruidoso.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 66 entries, 1 to 66
Data columns (total 4 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   Road_55dB      66 non-null     int64  
 1   Road_60dB      66 non-null     int64  
 2   Railways_65dB  66 non-null     int64  
 3   Industry_65dB  65 non-null     float64
dtypes: float64(1), int64(3)
memory usage: 2.6 KB</code></pre>
</div>
</div>
<p>Vemos que la información fué cargada correctamente y que el conjunto de datos cuenta con 66 registros y 4 variables.</p>
<p>Este conjunto de datos parece representar mediciones de diferentes niveles de ruido en distintos entornos, como carreteras, vías de ferrocarril e industrias. Cada fila representa una observación numerada y contiene información sobre los niveles de ruido en decibeles (dB) en varios lugares.</p>
<p>Las características principales de este conjunto de datos son:</p>
<ol type="1">
<li><p><strong>Variables</strong>:</p>
<ul>
<li>Road_55dB: Nivel de ruido en carreteras a 55 decibeles (dB).</li>
<li>Road_60dB: Nivel de ruido en carreteras a 60 decibeles (dB).</li>
<li>Railways_65dB: Nivel de ruido en vías de ferrocarril a 65 decibeles (dB).</li>
<li>Industry_65dB: Nivel de ruido en industrias a 65 decibeles (dB).</li>
</ul></li>
<li><p><strong>Registros</strong>: Cada fila representa una observación o medición en un determinado contexto o ubicación.</p></li>
<li><p><strong>Unidad de Medida</strong>: Las unidades de medida para los valores de las variables son decibeles (dB), que es la medida estándar para el nivel de ruido.</p></li>
<li><p><strong>Rango de Datos</strong>: Los valores en el conjunto de datos representan diferentes niveles de ruido en decibelios, que van desde 0 hasta números bastante grandes.</p></li>
</ol>
<p>En este conjunto de datos hay un valor nulo en la variable “Industry_65dB”, el resto de las variables no poseen aparentemente valores nulos.</p>
</section>
<section id="b.-realice-un-breve-análisis-exploratorio-para-identificar-la-distribución-de-las-variables-usadas-en-la-base-de-datos-será-que-existe-relación-entre-las-variables" class="level3">
<h3 class="anchored" data-anchor-id="b.-realice-un-breve-análisis-exploratorio-para-identificar-la-distribución-de-las-variables-usadas-en-la-base-de-datos-será-que-existe-relación-entre-las-variables">b. Realice un breve análisis exploratorio para identificar la distribución de las variables usadas en la base de datos ¿será que existe relación entre las variables?</h3>
<section id="gráfico-del-comportamiento-de-los-datos." class="level4">
<h4 class="anchored" data-anchor-id="gráfico-del-comportamiento-de-los-datos.">Gráfico del comportamiento de los datos.</h4>
<div id="87cb67cf" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importar libreria para el gráfico</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Columnas para el gráfico de líneas</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>columnas_ruido <span class="op">=</span> [<span class="st">'Road_55dB'</span>, <span class="st">'Road_60dB'</span>, <span class="st">'Railways_65dB'</span>, <span class="st">'Industry_65dB'</span>]</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea el gráfico de líneas</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Itera sobre las columnas </span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> columnas_ruido:</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    plt.plot(ruidoso.index, ruidoso[columna], label<span class="op">=</span>columna)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Etiquetas y título del gráfico</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Número del registro'</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Nivel de ruido (dB)'</span>)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Comportamiento de los niveles de ruido en diferentes ambientes'</span>)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Añade una leyenda</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)  <span class="co"># Agrega una cuadrícula al gráfico</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajusta el diseño del gráfico</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-7-output-1.png" width="758" height="471" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfico-de-barras-agrupadas" class="level4">
<h4 class="anchored" data-anchor-id="gráfico-de-barras-agrupadas">Gráfico de barras agrupadas</h4>
<div id="07c681f1" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importando libreria necesaria</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Columnas para el gráfico de barras</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>columnas_ruido <span class="op">=</span> [<span class="st">'Road_55dB'</span>, <span class="st">'Road_60dB'</span>, <span class="st">'Railways_65dB'</span>, <span class="st">'Industry_65dB'</span>]</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcula el promedio de los niveles de ruido para cada columna</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>promedios_ruido <span class="op">=</span> ruidoso[columnas_ruido].mean()</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea el gráfico de barras agrupadas</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Genera el gráfico de barras agrupadas</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> np.arange(<span class="bu">len</span>(columnas_ruido))  <span class="co"># Índices para las barras</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>bar_width <span class="op">=</span> <span class="fl">0.35</span>  <span class="co"># Ancho de las barras</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>opacity <span class="op">=</span> <span class="fl">0.8</span>  <span class="co"># Opacidad de las barras</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>plt.bar(index, promedios_ruido, bar_width, alpha<span class="op">=</span>opacity, label<span class="op">=</span><span class="st">'Promedio de niveles de ruido'</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Añade etiquetas y título al gráfico</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Niveles de ruido'</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Promedio de nivel de ruido (dB)'</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Comparación de promedio de niveles de ruido entre diferentes fuentes'</span>)</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>plt.xticks(index, columnas_ruido)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Leyenda para identificar las barras en el gráfico</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-8-output-1.png" width="758" height="470" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>De los gráficos anteriores observamos que la variable Road_55dB (Nivel de ruido a 55 decibeles en carreteras) es la que presenta los valores más altos.</p>
</section>
<section id="mirando-si-hay-relación-entre-las-variables." class="level4">
<h4 class="anchored" data-anchor-id="mirando-si-hay-relación-entre-las-variables.">Mirando si hay relación entre las variables.</h4>
<div id="964eb635" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importando libreria necesaria</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>sns.pairplot(ruidoso)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-9-output-1.png" width="946" height="947" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="análisis-de-correlación" class="level4">
<h4 class="anchored" data-anchor-id="análisis-de-correlación">Análisis de correlación</h4>
<div id="acf7f493" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la matriz de correlación</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="op">=</span> ruidoso.corr()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar la matriz de correlación usando un mapa de calor</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corr_matrix, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'cool'</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-10-output-1.png" width="628" height="416" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Miramos que si hay una posible relación entre las variables mirando el gráfico de pares, además, la matriz de correlación nos confirma esto, puesto que se observa la intensidad de los colores en el mapa de calor, y las correlaciones están cercanas a 1 lo que indica una relación lineal positiva muy fuerte entre las variables. Por ejemplo, las dos fuentes de ruido (Carreteras y ferrocarriles) tienen una correlación cercana a 1, lo que indica que sus niveles de ruido tienden a aumentar.</p>
</section>
</section>
<section id="c.-verifique-si-existen-problemas-de-datos-atípicos-en-cada-una-de-las-variables-usando-las-metodologías-de-detección-a-nivel-univariado." class="level3">
<h3 class="anchored" data-anchor-id="c.-verifique-si-existen-problemas-de-datos-atípicos-en-cada-una-de-las-variables-usando-las-metodologías-de-detección-a-nivel-univariado.">c.&nbsp;Verifique si existen problemas de datos atípicos en cada una de las variables usando las metodologías de detección a nivel univariado.</h3>
<section id="visión-general-de-la-distribución-de-los-datos" class="level4">
<h4 class="anchored" data-anchor-id="visión-general-de-la-distribución-de-los-datos">Visión general de la distribución de los datos</h4>
<div id="e9161a49" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visión general de la distribución de los datos</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>ruidoso.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Road_55dB</th>
<th data-quarto-table-cell-role="th">Road_60dB</th>
<th data-quarto-table-cell-role="th">Railways_65dB</th>
<th data-quarto-table-cell-role="th">Industry_65dB</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>6.600000e+01</td>
<td>6.600000e+01</td>
<td>66.000000</td>
<td>65.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>1.592288e+05</td>
<td>7.858788e+04</td>
<td>1139.393939</td>
<td>180.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>4.847513e+05</td>
<td>2.514090e+05</td>
<td>4778.827625</td>
<td>537.993959</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>7.600000e+03</td>
<td>4.000000e+03</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.895000e+04</td>
<td>1.007500e+04</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>3.755000e+04</td>
<td>1.740000e+04</td>
<td>100.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7.890000e+04</td>
<td>3.450000e+04</td>
<td>400.000000</td>
<td>100.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3.108200e+06</td>
<td>1.469100e+06</td>
<td>29700.000000</td>
<td>4000.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Vemos diferencias notables entre los valores mínimo y máximo de cada variable, así como también notables diferencias entre la media y la mediana, lo que nos da indicios de posibles valores atípicos.</p>
</section>
<section id="inspección-visual-de-outliers" class="level4">
<h4 class="anchored" data-anchor-id="inspección-visual-de-outliers">Inspección visual de outliers</h4>
<div id="010a10ea" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener la lista de todas las columnas en el dataset</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>columnas <span class="op">=</span> ruidoso.columns[<span class="dv">0</span>:]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar un histograma para cada variable en el dataset</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> columnas:</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    plt.figure()</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    sns.histplot(data<span class="op">=</span>ruidoso, x<span class="op">=</span>columna)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Histograma de </span><span class="sc">{</span>columna<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(columna)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">'Frecuencia'</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-12-output-1.png" width="585" height="449" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-12-output-2.png" width="585" height="449" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-12-output-3.png" width="587" height="449" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-12-output-4.png" width="585" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="c809f755" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener la lista de todas las columnas en el dataset</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>columnas <span class="op">=</span> ruidoso.columns[<span class="dv">0</span>:]</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar un boxplot para cada variable en el dataset</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> columnas:</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(data<span class="op">=</span>ruidoso, x<span class="op">=</span>columna)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Boxplot de </span><span class="sc">{</span>columna<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(columna)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-13-output-1.png" width="791" height="523" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-13-output-2.png" width="791" height="523" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-13-output-3.png" width="791" height="523" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-13-output-4.png" width="791" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Comentarios: De los gráficos (histograma y boxplot) podemos observar que las 4 variables presentan outliers, ya que hay valores muy alejados de la distribución en el histograma y hay observaciones por fuera de los bigotes de las cajas, pero acompañaremos estos hallazgos visuales con técnicas adicionales para detectar esos valores atípicos.</p>
</section>
<section id="inspección-de-outliers" class="level4">
<h4 class="anchored" data-anchor-id="inspección-de-outliers">Inspección de outliers</h4>
<ul>
<li>Z-Score</li>
</ul>
<p>Un Z-Score, es una medida estadística que indica a cuántas desviaciones estándar un punto de datos específico está por encima o por debajo de la media del conjunto de datos.</p>
<p>En este sentido, podemos calcular la puntuación Z de cada dato usando la función zscore de scipy y compararla con un umbral para determinar qué valores son considerados atípicos. Por lo general se establece un umbral de 3, por lo que aquellos puntos de datos cuya puntuación Z absoluta sea superior a 3 son outliers.</p>
<div id="79fcd8d4" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analisis Zscore para cada variable</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> zscore</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculo de z-score para cada punto de datos y su valor absoluto</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>z_scores <span class="op">=</span> zscore(ruidoso[<span class="st">"Road_55dB"</span>])</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># z_scores = zscore(ruidoso["Road_60dB"])</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># z_scores = zscore(ruidoso["Railways_65dB"])</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># z_scores = zscore(ruidoso["Industry_65dB"])</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>abs_z_scores <span class="op">=</span> np.<span class="bu">abs</span>(z_scores)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar los valores atípicos usando un umbral de 3</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>outliers <span class="op">=</span> ruidoso[abs_z_scores <span class="op">&gt;</span> <span class="fl">3.5</span>]</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(outliers)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Cantidad de valores atipicos</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Numero de valores atípicos: </span><span class="sc">{</span><span class="bu">len</span>(outliers)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
49    2387200    1426100          29700         4000.0
66    3108200    1469100          25800            NaN
Numero de valores atípicos: 2</code></pre>
</div>
</div>
<div id="02fa3d44" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>z_scores <span class="op">=</span> zscore(ruidoso[<span class="st">"Industry_65dB"</span>])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>abs_z_scores <span class="op">=</span> np.<span class="bu">abs</span>(z_scores)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar los valores atípicos usando un umbral de 3</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>outliers <span class="op">=</span> ruidoso[abs_z_scores <span class="op">&gt;</span> <span class="fl">3.5</span>]</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(outliers)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Cantidad de valores atipicos</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Numero de valores atípicos: </span><span class="sc">{</span><span class="bu">len</span>(outliers)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Empty DataFrame
Columns: [Road_55dB, Road_60dB, Railways_65dB, Industry_65dB]
Index: []
Numero de valores atípicos: 0</code></pre>
</div>
</div>
<p>Con este método nos da 2 posibles valores atípicos para todas las variables, excepto para “Industry_65dB” puesto que no detecta ningún valor atípico. Pero sabemos que la regla empírica en la cual se basa el z-score funciona en distribuciones normales, y como vimos en los histogramas que los valores para cada variable tienen una cola pesada a la derecha, este método no es adecuado para este conjunto de datos.</p>
<ul>
<li>Z-Score Modificado</li>
</ul>
<p>Cuando los datos son asimétricos o no se distribuyen de forma normal podemos utilizar el z-score modificado, también conocido como MAD-Z-Score. Este, a diferencia del z-score, utiliza la mediana y la desviación absoluta mediana (MAD en inglés) en lugar de la media y la desviación estándar con el fin de evitar el efecto de los outliers sobre estas dos últimas medidas.</p>
<p>La fórmula está dada por: <span class="math display">\[
M_i =  \frac{{0.6745*(x_i-Mediana)}}{{MAD}}
\]</span></p>
<p>La biblioteca PyOD, nos ayuda a realizar el cálculo anterior, así:</p>
<div id="00dd577d" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Z-score modifocado</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una lista de columnas del DataFrame</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>columnas <span class="op">=</span> ruidoso.columns[<span class="dv">0</span>:]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un diccionario para almacenar los resultados de MAD por cada columna</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>mad_resultados <span class="op">=</span> {}</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar sobre cada columna y aplicar el estimador MAD</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> columnas:</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    datos_columna <span class="op">=</span> ruidoso[columna].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Inicializar y ajustar el estimador MAD con un umbral de 3.5</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    mad <span class="op">=</span> MAD(threshold<span class="op">=</span><span class="fl">3.5</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    labels <span class="op">=</span> mad.fit(datos_columna).labels_</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Almacenar los resultados de MAD para la columna actual en el diccionario</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    mad_resultados[columna] <span class="op">=</span> labels</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los resultados de MAD para cada columna</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna, labels <span class="kw">in</span> mad_resultados.items():</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Resultados de MAD para </span><span class="sc">{</span>columna<span class="sc">}</span><span class="ss">:'</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(labels)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Valores atípicos: </span><span class="sc">{</span>labels<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resultados de MAD para Road_55dB:
[1 0 0 0 0 0 0 1 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]
Valores atípicos: 7

Resultados de MAD para Road_60dB:
[1 0 0 0 0 0 0 1 0 0 0 0 1 0 1 0 0 1 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]
Valores atípicos: 10

Resultados de MAD para Railways_65dB:
[1 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0 0 0
 0 0 0 1 0 0 0 0 0 0 0 1 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1]
Valores atípicos: 11

Resultados de MAD para Industry_65dB:
[0 0 0 1 1 1 1 1 1 1 0 1 1 0 1 0 0 1 1 1 1 0 0 0 0 1 1 0 1 0 0 1 0 0 0 0 0
 1 0 0 0 0 0 0 1 0 0 0 1 0 0 0 0 1 0 0 0 1 0 0 0 0 0 1 0 0]
Valores atípicos: 24
</code></pre>
</div>
</div>
<p>Nota: con el método ‘fit’ junto con el atributo ‘labels_’ podemos acceder a las etiquetas binarias generadas por el modelo, donde el estimador devuelve 0 para los (valores no-atípicos) y 1 para los valores atípicos.</p>
<p>Ahora, podemos filtrar el dataset usando las etiquetas para obtener todos los registros con valores atípicos en las variables según el z-score modificado.</p>
<div id="4b88e996" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los resultados de MAD para cada columna</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna, labels <span class="kw">in</span> mad_resultados.items():</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Valores atípicos: </span><span class="sc">{</span>labels<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    outliers <span class="op">=</span> ruidoso[labels<span class="op">==</span><span class="dv">1</span>]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(outliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Valores atípicos: 7

    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
1      166400      79200           1100            0.0
8      388000     185200            300         1300.0
13     192900      86000            100          900.0
15     823200     371700            300          800.0
29     689300     309300           1600          600.0
49    2387200    1426100          29700         4000.0
66    3108200    1469100          25800            NaN
Valores atípicos: 10

    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
1      166400      79200           1100            0.0
8      388000     185200            300         1300.0
13     192900      86000            100          900.0
15     823200     371700            300          800.0
18     140900      66200            100          300.0
27     156000      67300            300          200.0
29     689300     309300           1600          600.0
45     152500      69700            200          100.0
49    2387200    1426100          29700         4000.0
66    3108200    1469100          25800            NaN
Valores atípicos: 11

    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
1      166400      79200           1100            0.0
5      103100      33500           1900          200.0
11      57900      23300            700            0.0
29     689300     309300           1600          600.0
30       7600       4000            800            0.0
32     102800      41600           1000          400.0
41      47500      17400           1800            0.0
49    2387200    1426100          29700         4000.0
50      77200      24300           2500            0.0
56      64300      25100            900            0.0
66    3108200    1469100          25800            NaN
Valores atípicos: 24

    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
4       24500      16700              0          100.0
5      103100      33500           1900          200.0
6       36800      16100              0          100.0
7       39700      16800              0          300.0
8      388000     185200            300         1300.0
9       15000       9400            300          200.0
10      18600      12000              0          100.0
12      92700      33600              0          100.0
13     192900      86000            100          900.0
15     823200     371700            300          800.0
18     140900      66200            100          300.0
19      38000      13400            100          300.0
20      14100      10000              0          300.0
21      64800      36400              0          400.0
26      32400      19700            300          400.0
27     156000      67300            300          200.0
29     689300     309300           1600          600.0
32     102800      41600           1000          400.0
38      31600      10700            200          100.0
45     152500      69700            200          100.0
49    2387200    1426100          29700         4000.0
54      11600       8300            100          100.0
58      49700      32900              0          100.0
64      24500      12400            300          300.0</code></pre>
</div>
</div>
<p>En este caso hemos identificado más valores atípicos en cada variable que con el método del z-score estándar.</p>
<ul>
<li>Rango Intercuartil (IQR)</li>
</ul>
<p>Otro método que podemos emplear si nuestros datos no siguen la distribución normal es el método del rango intercuartílico (IQR).</p>
<p>El IQR es una medida de dispersión que indica la distancia entre el primer cuartil (percentil 25) y el tercer cuartil (percentil 75) de una distribución. Puede utilizarse para identificar outliers al ayudar a definir los límites a partir de los cuales los valores se consideran atípicos. Estos límites se calculan de la siguiente manera:</p>
<p>Límite inferior = Q1 — (k * IQR)</p>
<p>Límite superior = Q3 + (k * IQR)</p>
<p>Podemos calcular los límites con la función ‘quantile’ y usarlos para filtrar el dataset:</p>
<div id="d599d712" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener la lista de todas las columnas en el dataset</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>columnas <span class="op">=</span> ruidoso.columns[<span class="dv">0</span>:]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> columna <span class="kw">in</span> columnas:</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cálculo del rango intercuartílico (IQR)</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    Q1 <span class="op">=</span> ruidoso[columna].quantile(<span class="fl">0.25</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    Q3 <span class="op">=</span> ruidoso[columna].quantile(<span class="fl">0.75</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Identificar valores atípicos</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    outliers <span class="op">=</span> ruidoso[(ruidoso[columna] <span class="op">&lt;</span> (Q1 <span class="op">-</span> <span class="fl">1.5</span> <span class="op">*</span> IQR)) <span class="op">|</span> (ruidoso[columna] <span class="op">&gt;</span> (Q3 <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> IQR))]</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Posibles valores atípicos en </span><span class="sc">{</span>columna<span class="sc">:}</span><span class="ss">'</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Numero de valores atípicos:</span><span class="sc">{</span><span class="bu">len</span>(outliers)<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(outliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Posibles valores atípicos en Road_55dB
Numero de valores atípicos:6
    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
8      388000     185200            300         1300.0
13     192900      86000            100          900.0
15     823200     371700            300          800.0
29     689300     309300           1600          600.0
49    2387200    1426100          29700         4000.0
66    3108200    1469100          25800            NaN
Posibles valores atípicos en Road_60dB
Numero de valores atípicos:7
    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
1      166400      79200           1100            0.0
8      388000     185200            300         1300.0
13     192900      86000            100          900.0
15     823200     371700            300          800.0
29     689300     309300           1600          600.0
49    2387200    1426100          29700         4000.0
66    3108200    1469100          25800            NaN
Posibles valores atípicos en Railways_65dB
Numero de valores atípicos:7
    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
1      166400      79200           1100            0.0
5      103100      33500           1900          200.0
29     689300     309300           1600          600.0
41      47500      17400           1800            0.0
49    2387200    1426100          29700         4000.0
50      77200      24300           2500            0.0
66    3108200    1469100          25800            NaN
Posibles valores atípicos en Industry_65dB
Numero de valores atípicos:13
    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
7       39700      16800              0          300.0
8      388000     185200            300         1300.0
13     192900      86000            100          900.0
15     823200     371700            300          800.0
18     140900      66200            100          300.0
19      38000      13400            100          300.0
20      14100      10000              0          300.0
21      64800      36400              0          400.0
26      32400      19700            300          400.0
29     689300     309300           1600          600.0
32     102800      41600           1000          400.0
49    2387200    1426100          29700         4000.0
64      24500      12400            300          300.0</code></pre>
</div>
</div>
<p>Con este método encontramos menos datos atípicos que con el Z-score modificado, pero menos que con el Z-score estándar. Por lo tanto, debemos decidir como tratar los outliers identificados en cada variable.</p>
</section>
</section>
<section id="d.-se-detectan-valores-atípicos-a-nivel-multivariado" class="level3">
<h3 class="anchored" data-anchor-id="d.-se-detectan-valores-atípicos-a-nivel-multivariado">d.&nbsp;¿Se detectan valores atípicos a nivel multivariado?</h3>
<ul>
<li>Distancias de Mahalanobis</li>
</ul>
<p>Es una medida de distancia entre el punto <span class="math inline">\(\vec{x}=(x_1,x_2,x_3)\)</span> y el vector de medias <span class="math inline">\(\vec{\mu}=(\mu_1,\mu_2,\mu_3)\)</span>, teniendo en cuenta la matriz de varianzas y covarianzas <span class="math inline">\(S\)</span>. La distancia de Mahalanobis se define como:</p>
<p><span class="math display">\[
D_{M}(\vec{x})=\sqrt{(\vec{x}-\vec{\mu})^TS^{-1}(\vec{x}-\vec{\mu})}
\]</span></p>
<div id="0fe27e23" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionamos solo las columnas de interés</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>df_selected <span class="op">=</span> ruidoso[[<span class="st">'Road_55dB'</span>, <span class="st">'Road_60dB'</span>, <span class="st">'Railways_65dB'</span>, <span class="st">'Industry_65dB'</span>]]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos el gráfico de caja</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>df_selected)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Boxplot'</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Tipo de ruido'</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Nivel de ruido (dB)'</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-19-output-1.png" width="812" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="9897cee0" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.spatial <span class="im">import</span> distance</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>copia <span class="op">=</span> ruidoso.copy()</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la matriz de covarianza de las variables</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>cov_matrix <span class="op">=</span> np.cov(df_selected, rowvar<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la inversa de la matriz de covarianza</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>cov_inv <span class="op">=</span> np.linalg.inv(cov_matrix)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la distancia de Mahalanobis para cada fila en el DataFrame</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>dist_mahalanobis <span class="op">=</span> []</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> df_selected.values:</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> distance.mahalanobis(row, df_selected.mean(), cov_inv)</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    dist_mahalanobis.append(dist)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos la distancia de Mahalanobis como una nueva columna en el DataFrame</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>copia[<span class="st">'mahalanobis_distance'</span>] <span class="op">=</span> dist_mahalanobis</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostramos el DataFrame con la distancia de Mahalanobis</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(copia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB  mahalanobis_distance
1      166400      79200           1100            0.0                   NaN
2       20000      11000              0            0.0                   NaN
3       37800      18000              0            0.0                   NaN
4       24500      16700              0          100.0                   NaN
5      103100      33500           1900          200.0                   NaN
..        ...        ...            ...            ...                   ...
62      20700      16200              0            0.0                   NaN
63      15100       9900              0            0.0                   NaN
64      24500      12400            300          300.0                   NaN
65      12800       8500              0            0.0                   NaN
66    3108200    1469100          25800            NaN                   NaN

[66 rows x 5 columns]</code></pre>
</div>
</div>
<p>Hay un posible error en la información que impide calcular las distancias, por lo que analizaremos que puede estar produciendo esto:</p>
<div id="991b39a2" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>contar_faltantes <span class="op">=</span> df_selected.isna().<span class="bu">sum</span>()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>total <span class="op">=</span> np.product(df_selected.shape)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>total_faltantes <span class="op">=</span> contar_faltantes.<span class="bu">sum</span>()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Porcentale de datos faltantes</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>(total_faltantes<span class="op">/</span>total) <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>0.3787878787878788</code></pre>
</div>
</div>
<p>Como solo hay aproximadamente un 0.37% de datos faltantes, concentrados en una sola variable, y además, del estudio de datos atípicos univariados analizados anteriormente, en la mayoria nos dió que la observación 66 de las variables eran datos atípicos, decidimos entonces eliminar el registro 66 del conjunto de datos.</p>
<div id="5f436093" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ruidoso_copia <span class="op">=</span> ruidoso.copy()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminar la fila del DataFrame copia</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>ruidoso_copia <span class="op">=</span> ruidoso_copia.drop(index<span class="op">=</span><span class="dv">66</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar el DataFrame actualizado</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ruidoso_copia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB
1      166400      79200           1100            0.0
2       20000      11000              0            0.0
3       37800      18000              0            0.0
4       24500      16700              0          100.0
5      103100      33500           1900          200.0
..        ...        ...            ...            ...
61      74400      47000              0            0.0
62      20700      16200              0            0.0
63      15100       9900              0            0.0
64      24500      12400            300          300.0
65      12800       8500              0            0.0

[65 rows x 4 columns]</code></pre>
</div>
</div>
<p>Ahora, volvamos a calcular las distancias de Mahalanobis:</p>
<div id="82913761" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.spatial <span class="im">import</span> distance</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la matriz de covarianza de las variables</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>cov_matrix <span class="op">=</span> np.cov(ruidoso_copia, rowvar<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la inversa de la matriz de covarianza</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>cov_inv <span class="op">=</span> np.linalg.inv(cov_matrix)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos la distancia de Mahalanobis para cada fila en el DataFrame</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>dist_mahalanobis <span class="op">=</span> []</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> ruidoso_copia.values:</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> distance.mahalanobis(row, ruidoso_copia.mean(), cov_inv)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    dist_mahalanobis.append(dist)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos la distancia de Mahalanobis como una nueva columna en el DataFrame</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>ruidoso_copia[<span class="st">'mahalanobis_distance'</span>] <span class="op">=</span> dist_mahalanobis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="db916d3a" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenamos el DataFrame por la columna de distancia de Mahalanobis en orden descendente</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>df_sorted <span class="op">=</span> ruidoso_copia.sort_values(by<span class="op">=</span><span class="st">'mahalanobis_distance'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionamos los registros con las distancias más grandes</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>dist_mas_grandes <span class="op">=</span> df_sorted.head(<span class="dv">3</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>dist_mas_grandes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Road_55dB</th>
<th data-quarto-table-cell-role="th">Road_60dB</th>
<th data-quarto-table-cell-role="th">Railways_65dB</th>
<th data-quarto-table-cell-role="th">Industry_65dB</th>
<th data-quarto-table-cell-role="th">mahalanobis_distance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>2387200</td>
<td>1426100</td>
<td>29700</td>
<td>4000.0</td>
<td>7.921944</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>823200</td>
<td>371700</td>
<td>300</td>
<td>800.0</td>
<td>5.798900</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>388000</td>
<td>185200</td>
<td>300</td>
<td>1300.0</td>
<td>4.968816</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<ul>
<li>Local Outlier Factor:</li>
</ul>
<p>Local outlier factor es un método basado en <strong>densidad</strong> que utiliza la búsqueda de vecinos más cercanos. Ese método calcula los <strong>scores</strong> para cada uno de los puntos a partir de la tasa promedio de densidad de los puntos vecinos con respecto a si mismo.</p>
<div id="36cd7275" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> LocalOutlierFactor</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculamos el LOF para las 4 variables</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>lof <span class="op">=</span> LocalOutlierFactor(novelty<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>lof.fit_predict(ruidoso_copia)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos los scores LOF para cada punto</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>scores_lof <span class="op">=</span> <span class="op">-</span>lof.negative_outlier_factor_</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos los scores LOF como una nueva columna en el DataFrame</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>ruidoso_copia[<span class="st">'lof_score'</span>] <span class="op">=</span> scores_lof</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostramos el DataFrame con los scores LOF</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ruidoso_copia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Road_55dB  Road_60dB  Railways_65dB  Industry_65dB  mahalanobis_distance  \
1      166400      79200           1100            0.0              1.429036   
2       20000      11000              0            0.0              0.750562   
3       37800      18000              0            0.0              0.689198   
4       24500      16700              0          100.0              0.983754   
5      103100      33500           1900          200.0              3.648459   
..        ...        ...            ...            ...                   ...   
61      74400      47000              0            0.0              2.121306   
62      20700      16200              0            0.0              1.253857   
63      15100       9900              0            0.0              0.856649   
64      24500      12400            300          300.0              1.441410   
65      12800       8500              0            0.0              0.820636   

    lof_score  
1    2.209951  
2    0.959957  
3    1.170028  
4    1.041296  
5    1.626144  
..        ...  
61   1.594346  
62   0.962463  
63   0.987861  
64   0.984511  
65   1.003104  

[65 rows x 6 columns]</code></pre>
</div>
</div>
<div id="5f438653" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenamos el DataFrame por la columna 'lof_score' en orden descendente</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>df_sorted <span class="op">=</span> ruidoso_copia.sort_values(by<span class="op">=</span><span class="st">'lof_score'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionamos los primeros tres registros con los scores LOF más grandes</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>primeros_tres_lof <span class="op">=</span> df_sorted.head(<span class="dv">3</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>primeros_tres_lof</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Road_55dB</th>
<th data-quarto-table-cell-role="th">Road_60dB</th>
<th data-quarto-table-cell-role="th">Railways_65dB</th>
<th data-quarto-table-cell-role="th">Industry_65dB</th>
<th data-quarto-table-cell-role="th">mahalanobis_distance</th>
<th data-quarto-table-cell-role="th">lof_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>2387200</td>
<td>1426100</td>
<td>29700</td>
<td>4000.0</td>
<td>7.921944</td>
<td>37.888661</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>823200</td>
<td>371700</td>
<td>300</td>
<td>800.0</td>
<td>5.798900</td>
<td>12.333829</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>689300</td>
<td>309300</td>
<td>1600</td>
<td>600.0</td>
<td>4.533022</td>
<td>10.208054</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<ul>
<li>Isolation Forest:</li>
</ul>
<p>Las instancias de datos anómalos se pueden aislar de los datos normales mediante la partición recursiva del conjunto de datos.</p>
<div id="d78398a5" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> IsolationForest</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos la cantidad de árboles</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>n_arboles <span class="op">=</span> <span class="dv">250</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Inicializamos y ajustamos el modelo Isolation Forest con la cantidad de árboles especificada</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>isolation_forest <span class="op">=</span> IsolationForest(n_estimators<span class="op">=</span>n_arboles, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>puntajes_anomalia <span class="op">=</span> isolation_forest.fit(ruidoso_copia)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos los puntajes de anomalía para cada muestra</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>puntajes_anomalia <span class="op">=</span> isolation_forest.score_samples(ruidoso_copia)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertimos los puntajes de anomalía a valores positivos</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>puntajes_anomalia <span class="op">=</span> <span class="op">-</span>puntajes_anomalia</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos las etiquetas de anomalía como una nueva columna en el DataFrame</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>ruidoso_copia[<span class="st">'puntajes_anomalia'</span>] <span class="op">=</span> puntajes_anomalia</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3f3ade33" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenamos el DataFrame por los puntajes de anomalía en orden descendente</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>df_sorted <span class="op">=</span> ruidoso_copia.sort_values(by<span class="op">=</span><span class="st">'puntajes_anomalia'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionamos los primeros tres registros con los puntajes de anomalía más altos</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>primeros_tres_anomalies <span class="op">=</span> df_sorted.head(<span class="dv">3</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>primeros_tres_anomalies</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Road_55dB</th>
<th data-quarto-table-cell-role="th">Road_60dB</th>
<th data-quarto-table-cell-role="th">Railways_65dB</th>
<th data-quarto-table-cell-role="th">Industry_65dB</th>
<th data-quarto-table-cell-role="th">mahalanobis_distance</th>
<th data-quarto-table-cell-role="th">lof_score</th>
<th data-quarto-table-cell-role="th">puntajes_anomalia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>2387200</td>
<td>1426100</td>
<td>29700</td>
<td>4000.0</td>
<td>7.921944</td>
<td>37.888661</td>
<td>0.878678</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>823200</td>
<td>371700</td>
<td>300</td>
<td>800.0</td>
<td>5.798900</td>
<td>12.333829</td>
<td>0.705660</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>689300</td>
<td>309300</td>
<td>1600</td>
<td>600.0</td>
<td>4.533022</td>
<td>10.208054</td>
<td>0.691057</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="e.-para-el-caso-univariado-escoja-una-variable-y-realice-un-análisis-sobre-las-implicaciones-que-tiene-realizar-diferentes-tratamientos-a-los-datos-atípicos-en-la-distribución-de-la-respectiva-variable." class="level3">
<h3 class="anchored" data-anchor-id="e.-para-el-caso-univariado-escoja-una-variable-y-realice-un-análisis-sobre-las-implicaciones-que-tiene-realizar-diferentes-tratamientos-a-los-datos-atípicos-en-la-distribución-de-la-respectiva-variable.">e. Para el caso univariado, escoja una variable y realice un análisis sobre las implicaciones que tiene realizar diferentes tratamientos a los datos atípicos en la distribución de la respectiva variable.</h3>
<p>Escogimos la variable “Road_60dB”</p>
<ul>
<li>Imputar — queremos conservar la mayor cantidad de datos, pero eliminando el efecto de los outliers. Esto implica reemplazar los valores atípicos con otros valores como la mediana o la media.</li>
</ul>
<div id="1b15a4c8" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la media</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>median_value <span class="op">=</span> ruidoso_copia[<span class="st">'Road_60dB'</span>].median()</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Imputar outliers con la media</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>ruidoso_imputed <span class="op">=</span> ruidoso_copia.copy()</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>ruidoso_imputed.loc[outliers.index, <span class="st">'Road_60dB'</span>] <span class="op">=</span> median_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f5bec9ff" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a box plot</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una figura y ejes para los dos gráficos</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el boxplot para 'Road_60dB' antes de imputar con la mediana</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ruidoso_copia, x<span class="op">=</span><span class="st">'Road_60dB'</span>, ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">'cyan'</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el boxplot para 'Road_60dB' después de imputar con la mediana</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ruidoso_imputed, x<span class="op">=</span><span class="st">'Road_60dB'</span>, ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">'magenta'</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Establecer títulos y etiquetas de ejes</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'Before Imputation'</span>)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Road_60dB'</span>)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Values'</span>)</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'After Imputation'</span>)</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'Road_60dB'</span>)</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Values'</span>)</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar el espacio entre los dos gráficos</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los gráficos uno al lado del otro</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-30-output-1.png" width="1138" height="470" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="22cfcc81" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la media</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>mean_value <span class="op">=</span> ruidoso_copia[<span class="st">'Road_60dB'</span>].mean()</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Imputar outliers con la media</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>ruidoso_imputed2 <span class="op">=</span> ruidoso_copia.copy()</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>ruidoso_imputed2.loc[outliers.index, <span class="st">'Road_60dB'</span>] <span class="op">=</span> mean_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8d8acc8c" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a box plot</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una figura y ejes para los dos gráficos</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el boxplot para 'Road_60dB' antes de imputar con la mediana</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ruidoso_copia, x<span class="op">=</span><span class="st">'Road_60dB'</span>, ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">'cyan'</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el boxplot para 'Road_60dB' después de imputar con la mediana</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ruidoso_imputed2, x<span class="op">=</span><span class="st">'Road_60dB'</span>, ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">'magenta'</span>)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Establecer títulos y etiquetas de ejes</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'Before Imputation'</span>)</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Road_60dB'</span>)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Values'</span>)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'After Imputation'</span>)</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'Road_60dB'</span>)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Values'</span>)</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar el espacio entre los dos gráficos</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los gráficos uno al lado del otro</span></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-32-output-1.png" width="1138" height="470" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Winzorizar</strong> — La winsorización es una técnica que reemplaza los valores atípicos por el valor más cercano que no se considera un outlier según ciertos criterios.</li>
</ul>
<div id="a8dc8d0f" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats.mstats <span class="im">import</span> winsorize</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>ruidoso_winsorized <span class="op">=</span> ruidoso_copia.copy()</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>ruidoso_winsorized[<span class="st">'Road_60dB'</span>] <span class="op">=</span> winsorize(ruidoso_winsorized[<span class="st">'Road_60dB'</span>],<span class="op">\</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  limits <span class="op">=</span> [<span class="fl">0.05</span>, <span class="fl">0.05</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>limits = [0.05, 0.05]: Establece los límites de winsorización para el 5% de los valores en ambos extremos de la distribución. Es decir, el 5% de los valores más bajos y el 5% de los valores más altos serán reemplazados por los valores en el percentil 5 y el percentil 95, respectivamente.</p>
<div id="af9496d2" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a box plot</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una figura y ejes para los dos gráficos</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el boxplot para 'Road_60dB' antes de winsorization</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ruidoso_copia, x<span class="op">=</span><span class="st">'Road_60dB'</span>, ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">'cyan'</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el boxplot para 'Road_60dB' después de winsorization</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>ruidoso_winsorized, x<span class="op">=</span><span class="st">'Road_60dB'</span>, ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">'magenta'</span>)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Establecer títulos y etiquetas de ejes</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'Before Winsorization'</span>)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'Road_60dB'</span>)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Values'</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'After Winsorization'</span>)</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'Road_60dB'</span>)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Values'</span>)</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar el espacio entre los dos gráficos</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los gráficos uno al lado del otro</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-34-output-1.png" width="1142" height="470" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>El análisis de los diferentes tratamientos de datos atípicos en la distribución de la variable ‘Road_60dB’ puede ofrecer una visión importante sobre cómo estas acciones afectan la interpretación de los datos y los resultados obtenidos en un estudio o análisis. Aquí hay algunas implicaciones clave a considerar:</p>
<ol type="1">
<li><strong>Eliminación de datos atípicos</strong>:
<ul>
<li>Si se eliminan los datos atípicos de la variable ‘Road_60dB’, la distribución de los datos restantes podría cambiar significativamente. Esto puede afectar la media, la mediana y otros estadísticos descriptivos de la variable.</li>
<li>La eliminación de datos atípicos puede tener un impacto en el análisis de correlación y en la identificación de relaciones entre ‘Road_60dB’ y otras variables. Si los datos atípicos contienen información importante o representan escenarios reales, eliminarlos podría distorsionar la verdadera naturaleza de la variable.</li>
</ul></li>
<li><strong>Winsorization</strong>:
<ul>
<li>Al aplicar la técnica de winsorization a los datos atípicos en ‘Road_60dB’, se reemplazan los valores atípicos por los valores del percentil correspondiente. Esto puede reducir el impacto de los valores extremos en las estadísticas de resumen, como la media y la desviación estándar.</li>
<li>La winsorization puede ayudar a mejorar la robustez de los análisis estadísticos y modelización, ya que reduce la influencia de los valores extremos en la distribución de la variable.</li>
</ul></li>
<li><strong>Análisis de sensibilidad</strong>:
<ul>
<li>Es crucial realizar un análisis de sensibilidad para evaluar cómo diferentes tratamientos de datos atípicos afectan los resultados del análisis. Esto implica comparar los resultados obtenidos antes y después de aplicar los tratamientos y evaluar las diferencias significativas.</li>
<li>También se recomienda realizar análisis robustos que sean menos sensibles a los datos atípicos, como utilizar estadísticas de resumen robustas (por ejemplo, la mediana en lugar de la media) o modelos robustos.</li>
</ul></li>
</ol>
<p>En resumen, el tratamiento de datos atípicos en la distribución de las variables tiene implicaciones importantes en la interpretación de los datos y los resultados del análisis. Es fundamental considerar cuidadosamente los diferentes enfoques y realizar análisis de sensibilidad para tomar decisiones informadas sobre cómo abordar los datos atípicos de manera adecuada.</p>
<div id="e3aa5447" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>nombres <span class="op">=</span> [<span class="st">'mpg'</span>, <span class="st">'cylinders'</span>, <span class="st">'displacement'</span>, <span class="st">'horsepower'</span>, <span class="st">'weight'</span>, <span class="st">'acceleration'</span>, </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="st">'model_year'</span>, <span class="st">'origin'</span>, <span class="st">'car_name'</span>]</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>consumo <span class="op">=</span> pd.read_csv(<span class="st">"auto-mpg.data-original.txt"</span>, sep<span class="op">=</span><span class="st">'\s+'</span>, header<span class="op">=</span><span class="va">None</span>, </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> nombres, na_values<span class="op">=</span><span class="st">"NA"</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>consumo.head().to_latex<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La base de datos <strong>auto-mpg.data-original</strong> se refieren al consumo de combustible del ciclo urbano en millas por galón, esta base cuenta con 406 registros y 9 columnas.Cada variable está descrita a continuación. </p>
<p><strong>mpg</strong>: Consumo en millas por galón. <strong>cylinders</strong>: Cilindros. <strong>displacement</strong>: Desplazamiento. <strong>horsepower</strong>: Caballos de fuerza. <strong>weight</strong>: Peso <strong>acceleration</strong>: Aceleración. <strong>model_year</strong>: Año del modelo. <strong>origin</strong>: Origen. <strong>car_name</strong>: Nombre del coche.</p>
<div id="42b72993" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>consumo.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 406 entries, 0 to 405
Data columns (total 9 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   mpg           398 non-null    float64
 1   cylinders     406 non-null    float64
 2   displacement  406 non-null    float64
 3   horsepower    400 non-null    float64
 4   weight        406 non-null    float64
 5   acceleration  406 non-null    float64
 6   model_year    406 non-null    float64
 7   origin        406 non-null    float64
 8   car_name      406 non-null    object 
dtypes: float64(8), object(1)
memory usage: 28.7+ KB</code></pre>
</div>
</div>
<p>Como primera observación, tenemos que las variables <strong>mpg</strong> y <strong>horsepower</strong> presentan valores faltantes.</p>
<p>Resumenes estadisticos de todas las variables de la base de datos.</p>
<div id="b48a7385" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>consumo.describe(include<span class="op">=</span><span class="st">'all'</span>).to_latex()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para investigar de manera más visual, analicemos un diagrama de cajas para cada variable numérica de nuestro conjunto de datos. Esto nos permitirá tener una comprensión más clara de la distribución y la presencia de posibles valores atípicos en cada variable.</p>
<div id="a6007d3b" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>sns.boxplot(ax<span class="op">=</span>axes[<span class="dv">0</span>,<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>sns.boxplot(ax<span class="op">=</span>axes[<span class="dv">0</span>,<span class="dv">1</span>],x<span class="op">=</span>consumo[<span class="st">'cylinders'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>sns.boxplot(ax<span class="op">=</span>axes[<span class="dv">0</span>,<span class="dv">2</span>],x<span class="op">=</span>consumo[<span class="st">'displacement'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"purple"</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>sns.boxplot(ax<span class="op">=</span>axes[<span class="dv">1</span>,<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>color<span class="op">=</span><span class="st">"yellow"</span>)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(ax<span class="op">=</span>axes[<span class="dv">1</span>,<span class="dv">1</span>],x<span class="op">=</span>consumo[<span class="st">'weight'</span>],fill<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>color<span class="op">=</span><span class="st">"green"</span>)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>sns.boxplot(ax<span class="op">=</span>axes[<span class="dv">1</span>,<span class="dv">2</span>],x<span class="op">=</span>consumo[<span class="st">'acceleration'</span>],fill<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>color<span class="op">=</span><span class="st">"black"</span>)</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-38-output-1.png" width="756" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Al analizar las gráficas de cajas anteriores, podemos notar que la gran mayoría de las variables exhiben una distribución sin datos atípicos ni valores iguales a cero. Sin embargo, al examinar con detenimiento las variables <strong>mpg</strong>,<strong>acceleration</strong> y <strong>horsepower</strong>, encontramos que algunos datos se sitúan un poco más allá del rango típico de la variable, lo que sugiere la presencia de valores que podrían considerarse atípicos o inusuales dentro de la muestra.<br>
</p>
<p>Estudiemos la distribución de esas variables.</p>
<div id="2cf02e97" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(ax<span class="op">=</span>axes[<span class="dv">0</span>,<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(ax<span class="op">=</span>axes[<span class="dv">0</span>,<span class="dv">1</span>],x<span class="op">=</span>consumo[<span class="st">'cylinders'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(ax<span class="op">=</span>axes[<span class="dv">0</span>,<span class="dv">2</span>],x<span class="op">=</span>consumo[<span class="st">'displacement'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"purple"</span>)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(ax<span class="op">=</span>axes[<span class="dv">1</span>,<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>color<span class="op">=</span><span class="st">"yellow"</span>)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(ax<span class="op">=</span>axes[<span class="dv">1</span>,<span class="dv">1</span>],x<span class="op">=</span>consumo[<span class="st">'weight'</span>],fill<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>color<span class="op">=</span><span class="st">"green"</span>)</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>sns.kdeplot(ax<span class="op">=</span>axes[<span class="dv">1</span>,<span class="dv">2</span>],x<span class="op">=</span>consumo[<span class="st">'acceleration'</span>],fill<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>color<span class="op">=</span><span class="st">"black"</span>)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-39-output-1.png" width="750" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>La distribución del consumo de galones por milla es ligeramente asimétrica hacia la derecha. La mayoría de los vehículos se encuentran en el centro de la distribución, consumiendo entre 20 y 30 galones por milla. Sin embargo, existe una pequeña cantidad de vehículos que son más eficientes (consumen menos de 20 galones por milla) o menos eficientes (consumen más de 30 galones por milla) que la mayoría.</p>
<p>Por otro lado, la distribución para la variable de cilindros muestra una forma asimétrica hacia la derecha. La opción más común entre los autos es tener 4 cilindros. Aunque también hay una cantidad considerable de autos con 6 y 8 cilindros, que son opciones bastante comunes.</p>
<p>En cuanto al comportamiento de la variable de aceleración, la mayoría de los autos en el grupo tienen una aceleración similar a la media. Sin embargo, hay una pequeña cantidad de autos con aceleraciones muy bajas o muy altas. Además, la variabilidad en la aceleración es relativamente pequeña.</p>
<p>Busquemos si existe relaciones entre variables del conjunto de datos, se podria pensar que a mayor aceleración del auto mayor será su consumo, esto lo veremos en el suiguiente grafico de disperción.</p>
<div id="16c087e6" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data<span class="op">=</span>consumo, y<span class="op">=</span><span class="st">'mpg'</span>, x<span class="op">=</span><span class="st">'acceleration'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-40-output-1.png" class="quarto-figure quarto-figure-center figure-img" width="585" height="429"></p>
</figure>
</div>
</div>
</div>
<p>Otra posible relación es el peso del auto con los caballo de fuerza que contenga.</p>
<div id="7f48e600" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data<span class="op">=</span>consumo, y<span class="op">=</span><span class="st">'weight'</span>, x<span class="op">=</span><span class="st">'horsepower'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-41-output-1.png" class="quarto-figure quarto-figure-center figure-img" width="602" height="429"></p>
</figure>
</div>
</div>
</div>
<p>Así de esta manera podemos ir determinando posibles relaciones entre variables, acontinuacion se muestra una matriz de correlación entre las variables tratadas anteriormete.</p>
<div id="5577ebd1" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">5</span>))</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>sns.heatmap(consumo.loc[:, [<span class="st">'mpg'</span>,<span class="st">'acceleration'</span>,<span class="st">'weight'</span>,<span class="st">'horsepower'</span>]].corr(), annot<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>cmap<span class="op">=</span><span class="st">'coolwarm'</span>,fmt<span class="op">=</span><span class="st">".2f"</span>, square<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Matriz de correlación'</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-42-output-1.png" class="quarto-figure quarto-figure-center figure-img" width="490" height="419"></p>
</figure>
</div>
</div>
</div>
<p>Datos faltantes en cada variable.</p>
<div id="67de758b" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>NaN <span class="op">=</span> consumo.isna().<span class="bu">sum</span>()</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>NaN <span class="op">=</span> pd.DataFrame(NaN)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>NaN[<span class="st">'porcentaje'</span>] <span class="op">=</span> pd.DataFrame(consumo.isna().<span class="bu">sum</span>()<span class="op">/</span><span class="dv">406</span><span class="op">*</span>(<span class="dv">100</span>))</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>NaN.columns <span class="op">=</span> [<span class="st">'nan'</span>,<span class="st">'porcentaje'</span>]</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>NaN</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">nan</th>
<th data-quarto-table-cell-role="th">porcentaje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">mpg</td>
<td>8</td>
<td>1.970443</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">cylinders</td>
<td>0</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">displacement</td>
<td>0</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">horsepower</td>
<td>6</td>
<td>1.477833</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">weight</td>
<td>0</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">acceleration</td>
<td>0</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">model_year</td>
<td>0</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">origin</td>
<td>0</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">car_name</td>
<td>0</td>
<td>0.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>El porcentaje que representan estos datos faltantes a toda la base de datos se puede determinar.</p>
<div id="62c124e1" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>por <span class="op">=</span> (consumo.isna().<span class="bu">sum</span>().<span class="bu">sum</span>()<span class="op">/</span>np.product(consumo.shape))<span class="op">*</span><span class="dv">100</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Así el porcentaje total de datos faltantes  es de </span><span class="sc">{</span>por<span class="sc">:.2f}</span><span class="ss">% del total de los datos."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Así el porcentaje total de datos faltantes  es de 0.38% del total de los datos.</code></pre>
</div>
</div>
<div id="eb7770ed" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>consumo.columns</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>consumo.loc[:, [<span class="st">'mpg'</span>,<span class="st">'cylinders'</span>,<span class="st">'displacement'</span>,<span class="st">'acceleration'</span>,<span class="st">'weight'</span>,<span class="st">'horsepower'</span>]].corr()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mpg</th>
<th data-quarto-table-cell-role="th">cylinders</th>
<th data-quarto-table-cell-role="th">displacement</th>
<th data-quarto-table-cell-role="th">acceleration</th>
<th data-quarto-table-cell-role="th">weight</th>
<th data-quarto-table-cell-role="th">horsepower</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">mpg</td>
<td>1.000000</td>
<td>-0.775396</td>
<td>-0.804203</td>
<td>0.420289</td>
<td>-0.831741</td>
<td>-0.778427</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">cylinders</td>
<td>-0.775396</td>
<td>1.000000</td>
<td>0.951787</td>
<td>-0.522452</td>
<td>0.895220</td>
<td>0.844158</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">displacement</td>
<td>-0.804203</td>
<td>0.951787</td>
<td>1.000000</td>
<td>-0.557984</td>
<td>0.932475</td>
<td>0.898326</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">acceleration</td>
<td>0.420289</td>
<td>-0.522452</td>
<td>-0.557984</td>
<td>1.000000</td>
<td>-0.430086</td>
<td>-0.697124</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">weight</td>
<td>-0.831741</td>
<td>0.895220</td>
<td>0.932475</td>
<td>-0.430086</td>
<td>1.000000</td>
<td>0.866586</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">horsepower</td>
<td>-0.778427</td>
<td>0.844158</td>
<td>0.898326</td>
<td>-0.697124</td>
<td>0.866586</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Como lo determinamos anteriormente los datos presentan altos niveles de correlación entre las variables, lo que nos puede llevar a pensar que el mecanismo inherente de datos atipicos puede ser Missing at Random (MAR) ya que las variables que presentan datos faltantes pueden ser explicadas por otras variables dela misma base de datos.</p>
<div id="60bb122a" class="cell" data-fig-height="3.3" data-execution_count="45">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>msno.bar(consumo,figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), sort<span class="op">=</span><span class="st">"ascending"</span>,fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'tomato'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-46-output-1.png" width="987" height="601" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Eliminar</strong>: Por el método de eliminación optaremos por eliminar todas las filas que contengan datos.</p>
<div id="5846119f" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>consumo_delete <span class="op">=</span> consumo.copy()</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>consumo_delete.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>msno.bar(consumo_delete,figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), sort<span class="op">=</span><span class="st">"ascending"</span>,fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'tomato'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-47-output-1.png" width="987" height="601" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Así obtenemos una base de datos con 392 registros. De esta manera, verificamos que todas las variables tienen el mismo número de registros.</p>
<p><strong>Imputar</strong>: De forma general vamos a imputar con la media.</p>
<div id="f64420ce" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>consumo_imp_media <span class="op">=</span> consumo.copy()</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>mean_imputer <span class="op">=</span> SimpleImputer(strategy<span class="op">=</span><span class="st">'mean'</span>) </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>consumo_imp_media.iloc[:,:<span class="dv">8</span>] <span class="op">=</span> mean_imputer.fit_transform(consumo_imp_media.iloc[:,:<span class="dv">8</span>])</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>msno.bar(consumo_imp_media,figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'steelblue'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-48-output-1.png" width="987" height="601" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Como ultimo método utilizaremos KNNImputer de Sklearn.</p>
<div id="7c6f258f" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>consumo_KNN <span class="op">=</span> consumo.copy(deep<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>knn_imputer <span class="op">=</span> KNNImputer(n_neighbors<span class="op">=</span><span class="dv">2</span>, weights<span class="op">=</span><span class="st">"uniform"</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>consumo_KNN[[<span class="st">'mpg'</span>,<span class="st">'horsepower'</span>]] <span class="op">=</span> knn_imputer.fit_transform(consumo_KNN[[<span class="st">'mpg'</span>,<span class="st">'horsepower'</span>]])</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>msno.bar(consumo_KNN,figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>), fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'steelblue'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-49-output-1.png" width="987" height="601" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Por el método de elimación de resgistros</strong></p>
<div id="af3bbaa6" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para la Variable mpg por elimacion </span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Variable original'</span>)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">1</span>],x<span class="op">=</span>consumo_delete[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Variables con valores eliminados'</span>)</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-50-output-1.png" width="758" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="dd30f5d4" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para la Variable horsepower por elimacion </span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Variable original'</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">1</span>],x<span class="op">=</span>consumo_delete[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Variables con valores eliminados'</span>)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-51-output-1.png" width="758" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Por el método de Imputación por la media</strong></p>
<div id="8cd9bea9" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para la Variable mpg imputacion por la media  </span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Variable original'</span>)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">1</span>],x<span class="op">=</span>consumo_imp_media[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Variable imputado con la media'</span>)</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-52-output-1.png" width="758" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="286c1052" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para la Variable horsepower imputacion con la media  </span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Variable original'</span>)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">1</span>],x<span class="op">=</span>consumo_imp_media[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Variable imputada con la media'</span>)</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-53-output-1.png" width="758" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Por el método de KNNImputer de Sklearn</strong></p>
<div id="ceac0f9d" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para la Variable mpg imputacion por KNNImputer de Sklearn</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Variable original'</span>)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">1</span>],x<span class="op">=</span>consumo_KNN[<span class="st">'mpg'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Variable imputado por KNN'</span>)</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-54-output-1.png" width="758" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="7034a716" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para la Variable horsepower imputacion por KNN</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">0</span>],x<span class="op">=</span>consumo[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Variable original'</span>)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>sns.histplot(ax<span class="op">=</span>axes[<span class="dv">1</span>],x<span class="op">=</span>consumo_imp_media[<span class="st">'horsepower'</span>],fill<span class="op">=</span><span class="va">False</span>,color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Variable imputado con KNN'</span>)</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajustar el espaciado entre subplots</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Trabajo1_files/figure-html/cell-55-output-1.png" width="758" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>El método de imputación utilizando la media de la variable se destaca como la opción preferida en comparación con la eliminación de registros y el método KNN (vecinos más cercanos) debido a su capacidad para preservar la integridad del conjunto de datos al conservar todas las muestras originales. Además, este enfoque es simple, eficiente y fácilmente generalizable a una variedad de situaciones, lo que lo hace ampliamente aplicable en el preprocesamiento de datos. Al reemplazar los valores faltantes con un valor central representativo de la variable, la imputación con la media también mantiene la distribución general de los datos, facilitando la interpretación y el análisis, mientras que proporciona robustez frente a valores atípicos que pueden afectar métodos más complejos como el KNN.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>